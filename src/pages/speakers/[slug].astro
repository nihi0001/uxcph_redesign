---
import Layout from "../../layouts/Layout.astro";

export async function getStaticPaths() {
  const data = await fetch(
    "https://sqqqyffuhusqdvjkshxf.supabase.co/rest/v1/ux_speakers",
    {
      method: "GET",
      headers: {
        apikey:
          "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNxcXF5ZmZ1aHVzcWR2amtzaHhmIiwicm9sZSI6ImFub24iLCJpYXQiOjE2OTYzMzY4MDcsImV4cCI6MjAxMTkxMjgwN30.-K3pBEiuVw9Mv5jbVumfGHI6bYW6POCXvQuTh_bDzMM",
      },
    }
  ).then((response) => response.json());

  return data.map((speaker) => {
    return {
      params: { slug: speaker.slug },
      props: { myData: speaker },
    };
  });
}

const { myData } = Astro.props;
console.log(myData);

/*{
id: 1,
  created_at: '2023-10-03T12:55:44.688438+00:00',
  name: 'Mansi Gupta',
  jobposition: 'Founder of Unconform and partner',
  about: 'Mansi is the founder of Unconform, where she partners with organizations to incorporate a women-centric design approach. She created Women-Centric Design methodology and writes the newsletter Unconforming. She also curates Design for Women Conversations. \n' +
    '\n' +
    'With over 10 years of experience in behavioral research and design strategy, she previously worked on financial inclusion projects at Womenâ€™s World Banking and designed games for reproductive healthcare research in rural India at Final Mile Consulting. Mansi holds a BA in Computer Science & Economics and an MFA in Products of Design, and she is based in Amsterdam with roots in India.',
  contact: 'linkedin',
  image: 'web.p',
  tags: 'uxdesigner, speaker',
  slug: 'MansiGupta'
}*/
---

<Layout>
  <article class="single">
    <h2>{myData.name}</h2>
    <h3>{myData.jobposition}</h3>
    <p>{myData.about}</p>
    <p>{myData.contact}</p>
    <p>{myData.image}</p>
  </article>
</Layout>

<style>
  .single{
    margin: 2rem;
    font-family: Mulish; 
    margin-top: 5rem;
    margin-bottom: 5rem;

    }
</style>
